var x=["My chceme znovu motýle","Není to moje. Je to nějaký firmy, která patří do holdingu","Nikdy neodstoupím, nikdy! Nech si to všichni zapamatují. Nikdy","ti, kteří měli přijít, nepřišli","Best in covid","Ano, lobboval jsem za biopaliva","Orbán je můj přítel, naše vztahy jsou skutečně nadstandardní","Můžeme přijmout tisíce migrantů, můžou pracovat v mých fabrikách","Ještě 4 roky a dost, teď už fakt!","Důchodcům lžu, protože mi na to vždycky skočí","Stačí jim přidat pár kaček a jdou mě volit","Testy na Covid rušim, aby to vypadalo, že už Covid neni","Nikdo vám nemůže dát ani zlomek toho, co já vám dokážu slíbit","Je to kampaň"],T=[{url:"https://picsum.photos/800",weight:5},{url:"https://source.unsplash.com/800x800",weight:10},{url:"https://source.unsplash.com/800x800/?communism",weight:3},{url:"https://source.unsplash.com/800x800/?cat",weight:1},{url:"https://source.unsplash.com/800x800/?puppy",weight:1},{url:"https://source.unsplash.com/800x800/?chicken",weight:1},{url:"https://source.unsplash.com/800x800/?angry",weight:3}];var j=(t,o)=>{let a=[];for(;t.length>o;){let e=t.substring(0,o).lastIndexOf(" ");e=e<=0?o:e,a.push(t.substring(0,e));let n=t.indexOf(" ",e)+1;(n<e||n>e+o)&&(n=e),t=t.substring(n)}return a.push(t),a},y=t=>t[Math.floor(Math.random()*t.length)],L=(t,o=6)=>{let a=(i,c,m)=>.2126*i+.7152*c+.0722*m,e=0,n=0;for(let i=0;i<t.length;i+=3*o){let[c,m,p]=[t[i]/255,t[i+1]/255,t[i+2]/255],g=a(c,m,p);Number.isNaN(g)||(e+=g,n+=1)}return e/n};var B=480,N=30;var z=T.flatMap(({url:t,weight:o})=>Array(o).fill(t)),R=new FileReader,d=new Image;d.src="public/logo-light.png";var l=new Image,k="Test text",w=async()=>{let t=await fetch(y(z));return new Promise(o=>{let a=new Image;a.addEventListener("load",()=>{l=a,o()}),a.crossOrigin="anonymous",a.src=t.url})},E=()=>{k=y(x)},A=(t,o)=>{for(var a=t.getImageData(0,0,o.width,o.height),e=a.data,n=0,i=e.length;n<i;n+=4){var c=e[n]*.3+e[n+1]*.59+e[n+2]*.11;e[n]=c,e[n+1]=c,e[n+2]=c}t.putImageData(a,0,0)},r=document.getElementById("picture"),s=r.getContext("2d"),O=new FontFace("Bebas Neue","url(public/BebasNeue-Bold.ttf)"),C=async()=>{await O.load(),document.fonts.add(O)},D=t=>{!t.type.startsWith("image/")||R.readAsDataURL(t)};r.addEventListener("dragover",t=>t.preventDefault());r.addEventListener("drop",t=>{t.preventDefault(),!(!t.dataTransfer||t.dataTransfer.files.length<=0)&&D(t.dataTransfer.files[0])});var u=async()=>{s.fillStyle="black",s.fillRect(0,0,r.width,r.height);let t=r.width/l.width,o=r.height/l.height,a=Math.max(t,o);s.setTransform(a,0,0,a,0,0),s.drawImage(l,0,0),A(s,r),s.setTransform();let e=s.getImageData(B,N,d.width,d.height).data,n=L(e);s.drawImage(d,B,N,d.width/2.5,d.height/2.5);let i=j(k,20).reverse(),c=i.length<5?60:40;s.font=`${c}px 'Bebas Neue'`,i.forEach((m,p)=>{let g=30,b=685,h=15,v=h+c;s.fillStyle="#00ff00",s.fillRect(g,b-p*v,s.measureText(m).width+2*h,v),s.textBaseline="top",s.fillStyle="black",s.fillText(m,g+h,b+h-p*v)})};R.addEventListener("load",t=>{l=new Image,l.addEventListener("load",()=>u()),l.src=t.target.result});var M=document.getElementById("randomize");M.addEventListener("click",async()=>{E(),await w(),u()});var _=document.getElementById("randomize-img");_.addEventListener("click",async()=>{await w(),u()});var G=document.getElementById("randomize-text");G.addEventListener("click",()=>{E(),u()});var S=document.getElementById("customImage");S.addEventListener("change",t=>{t.preventDefault(),!(t.target.files.length<=0)&&D(t.target.files[0])});var H=document.getElementById("customImageBtn");H.addEventListener("click",()=>{S.click()});var f=document.getElementById("customText"),F=async t=>{(t.type==="input"||f.value)&&(k=f.value,u())};f.addEventListener("click",F);f.addEventListener("input",F);var I=document.createElement("a");I.setAttribute("download","pravda.jpg");var J=document.getElementById("save");J.addEventListener("click",t=>{t.preventDefault(),I.setAttribute("href",r.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream")),I.click()});C();E();w().then(()=>u());
//# sourceMappingURL=index.js.map
